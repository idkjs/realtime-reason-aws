// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE
'use strict';

var Block = require("bs-platform/lib/js/block.js");
var Wonka = require("wonka/src/wonka.js");
var Belt_Option = require("bs-platform/lib/js/belt_Option.js");
var Caml_option = require("bs-platform/lib/js/caml_option.js");
var Api = require("@aws-amplify/api");

function configure(config) {
  Api.default.configure(config);
  return /* () */0;
}

function observerLikeEvent_next($$event) {
  console.log("event", $$event);
  return /* () */0;
}

function observerLikeEvent_error(errorValue) {
  console.log(errorValue);
  return /* () */0;
}

function observerLikeEvent_complete(param) {
  console.log("complete");
  return /* () */0;
}

var observerLikeEvent = {
  next: observerLikeEvent_next,
  error: observerLikeEvent_error,
  complete: observerLikeEvent_complete
};

function listener_next($$event) {
  console.log("Subscription: ", JSON.stringify($$event.value.data, null, 2));
  console.log("EVENT: ", JSON.stringify($$event, null, 2));
  var message = $$event.value.data.message;
  console.log("MESSAGE: ", JSON.stringify(message, null, 2));
  return /* () */0;
}

function listener_error(errorValue) {
  console.log(errorValue);
  return /* () */0;
}

function listener_complete(param) {
  console.log("COMPLETE");
  return /* () */0;
}

var listener = {
  next: listener_next,
  error: listener_error,
  complete: listener_complete
};

function mutate(graphqlOperation) {
  return Api.default.graphql(graphqlOperation);
}

function subscriptionSink(graphqlOperation) {
  return Api.default.graphql(graphqlOperation);
}

function subObsLike(graphqlOperation) {
  return Wonka.map((function (observableLikeValue) {
                  return observableLikeValue;
                }))(Wonka.fromObservable(Api.default.graphql(graphqlOperation)));
}

function clientResponseToReason(parse, result) {
  var data = Belt_Option.map(result.data, parse);
  var error = result.error;
  var response = data !== undefined ? /* Data */Block.__(0, [Caml_option.valFromOption(data)]) : (
      error !== undefined ? /* Error */Block.__(1, [error]) : /* NotFound */1
    );
  return {
          data: data,
          error: error,
          response: response
        };
}

function executeQuery(request, param) {
  var req_query = request.query;
  var req_variables = Caml_option.some(request.variables);
  var req = {
    query: req_query,
    variables: req_variables
  };
  var parse = request.parse;
  return Wonka.map((function (result) {
                  return clientResponseToReason(parse, result);
                }))(Api.default.graphql(req));
}

function executeSubscription(request) {
  var req_query = request.query;
  var req_variables = Caml_option.some(request.variables);
  var req = {
    query: req_query,
    variables: req_variables
  };
  var parse = request.parse;
  return Wonka.map((function (result) {
                  return clientResponseToReason(parse, result);
                }))(Api.default.graphql(req));
}

exports.configure = configure;
exports.observerLikeEvent = observerLikeEvent;
exports.listener = listener;
exports.mutate = mutate;
exports.subscriptionSink = subscriptionSink;
exports.subObsLike = subObsLike;
exports.clientResponseToReason = clientResponseToReason;
exports.executeQuery = executeQuery;
exports.executeSubscription = executeSubscription;
/* Wonka Not a pure module */
